(this["webpackJsonpclient-tipper"]=this["webpackJsonpclient-tipper"]||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(22),i=n.n(s),r=n(4),o=(n(59),n(8)),l=n(3),u=n.n(l),d=n(7),j=n(2),b=n(12),h=n(14),p=n(54),v=n(0),m=["authorized","path","redirect"],O=function(e){var t=e.authorized,n=e.path,a=e.redirect,c=Object(p.a)(e,m);return t&&Object(v.jsx)(b.b,Object(o.a)({path:n},c))||Object(v.jsx)(b.a,{path:n,to:a})};n(69);var f=function(e){var t,n,c,s=Object(a.useState)(""),i=Object(j.a)(s,2),o=i[0],l=i[1],u=function(){var t;switch(window.location.pathname){case"/":case"/event/create":case"/event/edit":default:return l("active-home");case"/profile":return"artist"===(null===(t=e.user)||void 0===t?void 0:t.role)?l("active-profile-artist"):l("active-profile");case"/explore":return l("active-explore")}};return Object(a.useEffect)((function(){u()})),Object(v.jsx)("div",{className:"BottomNavbar ".concat(o),onClick:u,children:Object(v.jsxs)("div",{children:[Object(v.jsx)(r.b,{to:"/",className:"button",children:Object(v.jsxs)("div",{className:"button-wrapper",children:[Object(v.jsx)("span",{className:"circle"}),Object(v.jsx)("span",{children:"Home"})]})}),Object(v.jsx)(r.b,{to:"/explore",className:"button",children:Object(v.jsxs)("div",{className:"button-wrapper",children:[Object(v.jsx)("span",{className:"circle"}),Object(v.jsx)("span",{children:"Explore"})]})}),Object(v.jsx)(r.b,{to:("defaultUser"===(null===(t=e.user)||void 0===t?void 0:t.role)?"/profile":"artist"===(null===(n=e.user)||void 0===n?void 0:n.role)&&"/artist/".concat(e.user._id))||"/sign-in",className:"button",children:Object(v.jsxs)("div",{className:"button-wrapper",children:[Object(v.jsx)("span",{className:"circle"}),Object(v.jsx)("span",{children:e.user?"Profile":"Sign In"})]})}),"artist"===(null===(c=e.user)||void 0===c?void 0:c.role)&&Object(v.jsx)(r.b,{to:"/event/create",className:"button",children:Object(v.jsxs)("div",{className:"button-wrapper",children:[Object(v.jsx)("span",{className:"circle circle-live"}),"Go Live"]})})]})})},x=n(49),g=n(52),w=n.n(g).a.create({baseURL:"http://localhost:3010",withCredentials:!0}),N=function(e){return console.log("signUp",e),w.post("/auth/sign-up",e).then((function(e){return e.data.user}))},y=function(e){return w.post("/auth/update-location",e)};n(88);var S=function(e){var t=Object(a.useState)(""),n=Object(j.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(""),o=Object(j.a)(i,2),l=o[0],b=o[1],h=function(){var t=Object(d.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,s={email:c,password:l},w.post("/auth/sign-in",s).then((function(e){return e.data.user}));case 4:a=t.sent,e.onAuthenticationChange(a),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("Log in error: ",t.t0);case 11:case"end":return t.stop()}var s}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),p=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"email":s(a);break;case"password":b(a)}};return Object(v.jsx)("div",{className:"SignInViewOutter",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:"Sign In"}),Object(v.jsxs)("form",{onSubmit:h,className:"CreateEventView_content_form",children:[Object(v.jsxs)("div",{className:"CreateEventView_inputs",children:[Object(v.jsx)("label",{htmlFor:"input-email",children:"Email"}),Object(v.jsx)("input",{id:"input-email",type:"email",placeholder:"Your Email",name:"email",value:c,onChange:p}),Object(v.jsx)("label",{htmlFor:"input-password",children:"Password"}),Object(v.jsx)("input",{id:"input-password",type:"password",placeholder:"Your Password...",name:"password",value:l,onChange:p})]}),Object(v.jsx)("button",{className:"event-btn",children:"Sign In"})]}),Object(v.jsx)("p",{children:"No account yet?"}),Object(v.jsx)(r.b,{to:"/split",children:Object(v.jsx)("button",{className:"event-btn",children:"Sign Up"})})]})})};n(89);var _=function(){return Object(v.jsx)("div",{className:"SplitViewOutter",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:"Welcome"}),Object(v.jsxs)("div",{className:"split-users-container",children:[Object(v.jsx)("p",{children:"I am a ..."}),Object(v.jsxs)("div",{className:"SplitUser",children:[Object(v.jsx)(r.b,{to:"/sign-up",children:Object(v.jsx)("button",{className:"event-btn",children:"Listener"})}),Object(v.jsx)(r.b,{to:"/artist-sign-up",children:Object(v.jsx)("button",{className:"event-btn",children:"Player"})})]})]})]})})};n(90);var C=function(e){var t=Object(a.useState)(""),n=Object(j.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(""),o=Object(j.a)(i,2),l=o[0],b=o[1],h=Object(a.useState)(""),p=Object(j.a)(h,2),m=p[0],O=p[1],f=Object(a.useState)(""),x=Object(j.a)(f,2),g=x[0],w=x[1],y=function(){var t=Object(d.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,N({firstName:c,lastName:l,email:m,password:g});case 4:a=t.sent,e.onAuthenticationChange(a),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("Sign up error: ",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),S=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"firstName":s(a);break;case"lastName":b(a);break;case"email":O(a);break;case"password":w(a)}};return Object(v.jsx)("div",{className:"SignUpViewOutter",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:"Sign Up"}),Object(v.jsxs)("form",{onSubmit:y,className:"CreateEventView_content_form",children:[Object(v.jsxs)("div",{className:"CreateEventView_inputs",children:[Object(v.jsx)("label",{htmlFor:"input-name",children:"First Name"}),Object(v.jsx)("input",{id:"input-first-name",type:"text",placeholder:"First Name",name:"firstName",value:c,onChange:S}),Object(v.jsx)("label",{htmlFor:"input-name",children:"Last Name"}),Object(v.jsx)("input",{id:"input-last-name",type:"text",placeholder:"Last name",name:"lastName",value:l,onChange:S}),Object(v.jsx)("label",{htmlFor:"input-email",children:"Email"}),Object(v.jsx)("input",{id:"input-email",type:"email",placeholder:"your@email.com",name:"email",value:m,onChange:S}),Object(v.jsx)("label",{htmlFor:"input-password",children:"Password"}),Object(v.jsx)("input",{id:"input-password",type:"password",placeholder:"A Secure Password",name:"password",value:g,onChange:S})]}),Object(v.jsx)("button",{className:"event-btn",children:"Sign Up"})]}),Object(v.jsx)("br",{}),Object(v.jsx)("p",{children:"Already have an account?"}),Object(v.jsx)(r.b,{to:"/sign-in",children:Object(v.jsx)("button",{className:"event-btn",children:"Sign In"})})]})})};n(91);var k=function(e){var t=Object(a.useState)(""),n=Object(j.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(""),o=Object(j.a)(i,2),l=o[0],b=o[1],h=Object(a.useState)(""),p=Object(j.a)(h,2),m=p[0],O=p[1],f=Object(a.useState)(""),x=Object(j.a)(f,2),g=x[0],w=x[1],y=function(){var t=Object(d.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,N({firstName:c,lastName:l,email:m,password:g,role:"artist"});case 4:a=t.sent,e.onAuthenticationChange(a),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("Sign up error: ",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),S=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"firstName":s(a);break;case"lastName":b(a);break;case"email":O(a);break;case"password":w(a)}};return Object(v.jsx)("div",{className:"ArtistSignUpViewOutter",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:"Artist Sign Up"}),Object(v.jsxs)("form",{onSubmit:y,className:"CreateEventView_content_form",children:[Object(v.jsxs)("div",{className:"CreateEventView_inputs",children:[Object(v.jsx)("label",{htmlFor:"input-name",children:"Name"}),Object(v.jsx)("input",{id:"input-first-name",type:"text",placeholder:"First Name",name:"firstName",value:c,onChange:S}),Object(v.jsx)("label",{htmlFor:"input-name",children:"Name"}),Object(v.jsx)("input",{id:"input-last-name",type:"text",placeholder:"Last name",name:"lastName",value:l,onChange:S}),Object(v.jsx)("label",{htmlFor:"input-email",children:"Email"}),Object(v.jsx)("input",{id:"input-email",type:"email",placeholder:"your@email.com",name:"email",value:m,onChange:S}),Object(v.jsx)("label",{htmlFor:"input-password",children:"Password"}),Object(v.jsx)("input",{id:"input-password",type:"password",placeholder:"A Secure Password",name:"password",value:g,onChange:S})]}),Object(v.jsx)("button",{className:"event-btn",children:"Sign Up"})]}),Object(v.jsx)("p",{children:"Already have an account?"}),Object(v.jsx)(r.b,{to:"/sign-in",children:Object(v.jsx)("button",{className:"event-btn",children:"Sign In"})})]})})};var U=function(e){return Object(v.jsxs)("div",{className:"UserProfileView_transaction",children:[Object(v.jsxs)("div",{className:"UserProfileView_transaction_left",children:[Object(v.jsx)("div",{className:"UserProfileView_transaction_concept",children:"Tip to: ".concat(e.transaction.artistTipped.firstName," ").concat(e.transaction.artistTipped.lastName)}),Object(v.jsx)("div",{className:"UserProfileView_transaction_date",children:e.transaction.date.split("T")[0]})]}),Object(v.jsx)("div",{className:"UserProfileView_transaction_right",children:Object(v.jsx)("div",{className:"UserProfileView_transaction_amount",children:"$ ".concat(e.transaction.amount)})})]})},P=function(e){var t=new FormData;return t.append("avatar",e),w.post("/profile/upload-avatar",t).then((function(e){return e.data.avatarUpdate}))},T=function(e){return w.post("/profile/edit",e).then((function(e){return e.data.user}))},L=n(5),E=n(6),V=n(10),D=n(9),A=n(25),M=n(53),I=(n(92),{style:{base:{color:"#32325d",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}},classes:{base:"form-control",complete:"form-control-success",empty:"form-control-danger",focus:"form-control-focus",invalid:"form-control-danger"}}),F=function(e){Object(V.a)(n,e);var t=Object(D.a)(n);function n(){var e;Object(L.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).handleFormSubmission=function(t){t.preventDefault();var n=e.props,a=n.stripe,c=n.elements.getElement(A.CardElement);a.createPaymentMethod({type:"card",card:c}).then((function(t){var n=t.paymentMethod,a=t.error;a?(alert("There was an error processing your payment method details."),console.log(a)):n&&(console.log(n),e.props.onConfirmPaymentMethod({token:n.id,card:n.card}))})).catch((function(e){alert("Error"),console.log(e)}))},e}return Object(E.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("form",{onSubmit:this.handleFormSubmission,children:[Object(v.jsx)(A.CardElement,{options:I}),Object(v.jsx)("button",{className:"save-changes-btn general-btn",children:"Save Details"})]})}}]),n}(a.Component),z=function(e){Object(V.a)(n,e);var t=Object(D.a)(n);function n(e){var a;return Object(L.a)(this,n),(a=t.call(this,e)).state={stripePromise:Object(M.a)("pk_test_51J74zrEX5jgnMJ8SsXgOSX2YSbfderxfn4KULnSrj6WYCMyxZrUpzrKwGJ8Gn2LPU2JYVEmuYOun4nkzxu8pkfgW0045kKypE5")},a}return Object(E.a)(n,[{key:"render",value:function(){var e=this;return Object(v.jsx)(A.Elements,{stripe:this.state.stripePromise,children:Object(v.jsx)(A.ElementsConsumer,{children:function(t){var n=t.stripe,a=t.elements;return Object(v.jsx)(F,Object(o.a)({stripe:n,elements:a},e.props))}})})}}]),n}(a.Component);n(93);var G=function(e){return Object(v.jsxs)("div",{className:"CreditCard",children:[Object(v.jsx)("div",{}),Object(v.jsxs)("div",{className:"card-number",children:["\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 ",e.paymentDetails.last4]}),Object(v.jsxs)("div",{children:["Expires ",e.paymentDetails.exp_month,"/",e.paymentDetails.exp_year,Object(v.jsx)("div",{children:"".concat(e.user.firstName," ").concat(e.user.lastName)})]})]})},R=n.p+"static/media/camera.e73a320a.svg";n(94);var q=function(e){var t,n,c,s,i,o,l,b,h,p,m,O,f,x,g,N,y=Object(a.useState)((null===(t=e.user)||void 0===t?void 0:t.email)||""),S=Object(j.a)(y,2),_=S[0],C=S[1],k=Object(a.useState)(""),P=Object(j.a)(k,2),L=P[0],E=P[1],V=Object(a.useState)(""),D=Object(j.a)(V,2),A=D[0],M=D[1],I=Object(a.useState)(),F=Object(j.a)(I,2),q=F[0],B=F[1],Y=Object(a.useState)([]),H=Object(j.a)(Y,2),W=H[0],J=H[1];Object(a.useEffect)((function(){var t,n;(null===(t=e.user)||void 0===t||null===(n=t.paymentDetails)||void 0===n?void 0:n.paymentToken)&&(B(!0),console.log(q))}),[null===(n=e.user)||void 0===n||null===(c=n.paymentDetails)||void 0===c?void 0:c.paymentToken]),Object(a.useEffect)((function(){var t,n;"artist"===(null===(t=e.user)||void 0===t?void 0:t.role)&&e.history.push("/artist/".concat(null===(n=e.user)||void 0===n?void 0:n._id))}),[null===(s=e.user)||void 0===s?void 0:s.role]),Object(a.useEffect)((function(){$()}),[]);var $=function(){var t=Object(d.a)(u.a.mark((function t(){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c=null===(n=e.user)||void 0===n?void 0:n._id,w.get("/transaction/list",c).then((function(e){return e.data}));case 3:a=t.sent,J(a.transactions),console.log(a.transactions),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}var c}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),K=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,T({email:_,password:L,confirmPassword:A});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var t=Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.patch("/profile/card").then((function(e){return e.data}));case 3:e.onUserRefresh(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),Z=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"email":C(a);break;case"password":E(a);break;case"confirmPassword":M(a)}},Q=function(){var t=Object(d.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log(n),t.next=4,c=n,w.post("/profile/card",c).then((function(e){return e.data}));case 4:a=t.sent,console.log(a),B(!0),e.onUserRefresh(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}var c}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"UserProfileView",children:[Object(v.jsx)("button",{className:"sign-out-btn",onClick:e.onSignOut,children:Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(v.jsx)("path",{d:"M10 9.408l2.963 2.592-2.963 2.592v-1.592h-8v-2h8v-1.592zm-2-4.408v4h-8v6h8v4l8-7-8-7zm6-3c-1.787 0-3.46.474-4.911 1.295l.228.2 1.396 1.221c1.004-.456 2.114-.716 3.287-.716 4.411 0 8 3.589 8 8s-3.589 8-8 8c-1.173 0-2.283-.26-3.288-.715l-1.396 1.221-.228.2c1.452.82 3.125 1.294 4.912 1.294 5.522 0 10-4.477 10-10s-4.478-10-10-10z"})})}),Object(v.jsxs)("div",{className:"UserProfileAvatar",children:[Object(v.jsxs)("div",{className:"UserProfileView_header",children:[(null===(i=e.user)||void 0===i?void 0:i.avatarUrl)?Object(v.jsx)("img",{className:"UserProfileView_avatar",src:null===(o=e.user)||void 0===o?void 0:o.avatarUrl,alt:"avatar"}):Object(v.jsx)("div",{className:"UserProfileView_avatar_text",children:Object(v.jsxs)("span",{className:"Profile-letters",children:[null===(l=e.user)||void 0===l?void 0:l.firstName[0],null===(b=e.user)||void 0===b?void 0:b.lastName[0]]})}),Object(v.jsx)(r.b,{to:"/profile/upload-avatar",children:Object(v.jsx)("img",{src:R,alt:"edit"})})]}),Object(v.jsx)("h3",{className:"Profile-name",children:"".concat(null===(h=e.user)||void 0===h?void 0:h.firstName," ").concat(null===(p=e.user)||void 0===p?void 0:p.lastName)})]}),Object(v.jsxs)("div",{className:"UserProfileView_body",children:[Object(v.jsxs)("div",{className:"UserProfileView_body_section",children:[Object(v.jsx)("h4",{className:"UserProfileView_body_section_title",children:"PAYMENT INFO"}),Object(v.jsxs)("div",{className:"UserProfileView_body_section_content card-section",children:[(null===(m=e.user)||void 0===m||null===(O=m.paymentDetails)||void 0===O?void 0:O.paymentToken)&&Object(v.jsxs)("div",{children:[Object(v.jsx)(G,{paymentDetails:null===(f=e.user)||void 0===f?void 0:f.paymentDetails,user:e.user}),Object(v.jsx)("button",{className:"remove-payment-btn general-btn",onClick:X,children:"Remove payment method"})]}),!(null===(x=e.user)||void 0===x||null===(g=x.paymentDetails)||void 0===g?void 0:g.paymentToken)&&Object(v.jsx)(z,{onConfirmPaymentMethod:Q})]})]}),Object(v.jsxs)("div",{className:"UserProfileView_body_section",children:[Object(v.jsx)("h4",{className:"UserProfileView_body_section_title",children:"TRANSACTIONS"}),Object(v.jsx)("div",{className:"UserProfileView_body_section_content",children:Object(v.jsx)("div",{className:"UserProfileView_transactions",children:W.length>0?W.map((function(e){return Object(v.jsx)(U,{transaction:e})})):Object(v.jsx)("p",{children:"No transactions yet"})})})]}),Object(v.jsxs)("form",{className:"UserProfileView_body_section",onSubmit:K,children:[Object(v.jsx)("h4",{className:"UserProfileView_body_section_title",children:"ACCOUNT"}),Object(v.jsxs)("div",{className:"UserProfileView_body_section_content",children:[Object(v.jsxs)("div",{className:"UserProfileView_body_section_content_inputs",children:[Object(v.jsx)("span",{children:"Email:"}),Object(v.jsx)("input",{value:(null===(N=e.user)||void 0===N?void 0:N.email)||_,type:"text",id:"email-input",name:"email",onChange:Z,required:!0})]}),Object(v.jsxs)("div",{className:"UserProfileView_body_section_content_inputs",children:[Object(v.jsx)("span",{children:"Password:"}),Object(v.jsx)("input",{value:L,type:"password",id:"password-input",name:"password",onChange:Z,required:!0})]}),Object(v.jsxs)("div",{className:"UserProfileView_body_section_content_inputs",children:[Object(v.jsx)("span",{children:"Confirm Password:"}),Object(v.jsx)("input",{value:A,type:"password",id:"password-confirm-input",name:"confirmPassword",onChange:Z,required:!0})]})]}),Object(v.jsx)("button",{className:"save-changes-btn general-btn",children:"Save Changes"})]})]})]})},B=n(15),Y=function(e){return w.get("/artist/".concat(e),e).then((function(e){return e.data.artist}))},H=function(e){var t=new FormData;return t.append("avatar",e),w.post("/artist/upload-background",t).then((function(e){return e.data.backgroundUpdate}))},W=function(e){return w.get("artist/".concat(e,"/count-followers"),e).then((function(e){return e.data.follow}))},J=(n(95),function(e){var t=e.options,n=e.selected,a=e.onSelectedChange,c=e.blobSize,s=function(e){var t=e.target,c=t.checked,s=t.name;a(c?[].concat(Object(B.a)(n),[s]):n.filter((function(e){return e!==s})))};return Object(v.jsx)("div",{className:"GenreCheckboxHolder",children:t.map((function(e){var t=e.value,i=e.label;return Object(v.jsxs)("div",{className:"GenreBox ".concat((null===n||void 0===n?void 0:n.includes(t))?"GenreBox-active":""," ").concat("small"===c?"small-blob":""),onClick:function(){!function(e){console.log("clicked");var t=n.includes(e);a(t?n.filter((function(t){return t!==e})):[].concat(Object(B.a)(n),[e]))}(t)},children:[Object(v.jsx)("input",{type:"checkbox",checked:null===n||void 0===n?void 0:n.includes(t),name:t,onChange:s}),Object(v.jsx)("label",{children:i})]},t)}))})}),$=function(e){var t=(new Date).getTimezoneOffset(),n=e.split(":"),a=Object(j.a)(n,2),c=a[0],s=a[1];return s-=t,c=Number(c),s>=60?(c+=1,s-=60):s<0&&(c-=1,s+=60),s<10&&(s="0".concat(s)),c<10&&(c="0".concat(c)),"".concat(c,":").concat(s)},K=(n(96),function(e){var t=function(){var e=Object(d.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,a=n,w.post("artist/event/".concat(a,"/delete"),a);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}var a}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{children:[e.nowEvents.map((function(n,a){return Object(v.jsx)("div",{children:n.map((function(n,a){return Object(v.jsxs)("div",{className:"events-now",children:[Object(v.jsxs)(r.b,{to:"/event/".concat(n._id),children:[Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{children:"Title:"})," ",n.title]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{children:"Description:"})," ",n.description]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{children:"Date:"})," ",n.date.split("T")[0]," "]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{children:"Time:"})," ",$(n.date.substring(11,16))]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{children:"Duration:"})," ",n.duration," min"]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{children:"Genre:"})," ",n.genre]})]}),e.isOwnProfile&&Object(v.jsx)("form",{onSubmit:function(a){t(a,n._id),e.onDeleteEvent()},children:Object(v.jsx)("button",{className:"delete-btn",children:"Delete"})})]},a)}))},a)})),e.events.map((function(n,a){return Object(v.jsx)("div",{children:n.map((function(n,a){return Object(v.jsxs)("div",{className:"artist-events",children:[Object(v.jsxs)(r.b,{to:"/event/".concat(n._id),children:[Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{children:"Title:"})," ",n.title]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{children:"Description:"})," ",n.description]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{children:"Date:"})," ",n.date.split("T")[0]," "]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{children:"Time:"})," ",$(n.date.substring(11,16))]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{children:"Duration:"})," ",n.duration," min"]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{children:"Genre:"})," ",n.genre]})]}),e.isOwnProfile&&Object(v.jsx)("form",{onSubmit:function(e){return t(e,n._id)},children:Object(v.jsx)("button",{className:"delete-btn",children:"Delete"})})]},a)}))},a)}))]})}),X=(n(97),n.p+"static/media/cog.0a4e0295.svg"),Z=n.p+"static/media/sign-out.8ca0b304.svg";var Q=function(e){var t,n,c,s,i,l,b,h,p=Object(a.useState)(),m=Object(j.a)(p,2),O=m[0],f=m[1],x=Object(a.useState)(!1),g=Object(j.a)(x,2),N=g[0],y=g[1],S=Object(a.useState)(null===(t=e.user)||void 0===t?void 0:t.email),_=Object(j.a)(S,2),C=_[0],k=_[1],U=Object(a.useState)(""),P=Object(j.a)(U,2),L=P[0],E=P[1],V=Object(a.useState)(""),D=Object(j.a)(V,2),A=D[0],M=D[1],I=Object(a.useState)(null===(n=e.user)||void 0===n?void 0:n.bio),F=Object(j.a)(I,2),z=F[0],G=F[1],q=Object(a.useState)(null===(c=e.user)||void 0===c?void 0:c.instruments),H=Object(j.a)(q,2),$=H[0],Q=H[1],ee=Object(a.useState)(null===(s=e.user)||void 0===s?void 0:s.genre),te=Object(j.a)(ee,2),ne=te[0],ae=te[1],ce=Object(a.useState)(),se=Object(j.a)(ce,2),ie=se[0],re=se[1],oe=Object(a.useState)(),le=Object(j.a)(oe,2),ue=le[0],de=le[1],je=Object(a.useState)([]),be=Object(j.a)(je,2),he=be[0],pe=be[1],ve=Object(a.useState)([]),me=Object(j.a)(ve,2),Oe=me[0],fe=me[1],xe=e.match.params.id===(null===(i=e.user)||void 0===i?void 0:i._id);Object(a.useEffect)((function(){ge()}),[e.match.params.id]);var ge=function(){var t=Object(d.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(xe){t.next=14;break}return t.prev=1,t.next=4,Y(e.match.params.id);case 4:n=t.sent,f(n),we(n._id),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:t.next=16;break;case 14:f(e.user),we(e.user._id);case 16:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),we=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t);case 2:n=e.sent,de(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){ke(),Ue(),Ne(),xe&&ae(Object(B.a)(e.user.genre))}),[]);var Ne=function(){var t=Object(d.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a=e.match.params.id,w.get("/artist/".concat(a,"/follow"),a).then((function(e){return e.data.follow}));case 3:n=t.sent,re(!!n),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}var a}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),ye=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{y(!N)}catch(t){console.log(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,T({email:C,password:L,confirmPassword:A,bio:z,genre:ne,instruments:$});case 4:ye(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),_e=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"email":k(a);break;case"password":E(a);break;case"confirmPassword":M(a);break;case"bio":G(a);break;case"instruments":Q(a)}},Ce=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t=null===O||void 0===O?void 0:O._id,w.post("/artist/".concat(t,"/follow"),t).then((function(e){return e.data.follow}));case 3:return re((function(e){return!e})),e.next=6,W(null===O||void 0===O?void 0:O._id);case 6:de(ie?function(e){return e-1}:function(e){return e+1}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}var t}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),ke=function(){var t=Object(d.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a=e.match.params.id,w.get("artist/".concat(a,"/events"),a).then((function(e){return e.data.upcomingEvents}));case 3:n=t.sent,pe([n]),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}var a}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),Ue=function(){var t=Object(d.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a=e.match.params.id,w.get("artist/".concat(a,"/events/now"),a).then((function(e){return e.data.runningEvents}));case 3:n=t.sent,fe([n]),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}var a}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return Object(v.jsx)("div",{className:"ArtistProfileView",children:Object(v.jsxs)("div",{children:[N&&Object(v.jsxs)("form",{className:"UserProfileView_body_section",onSubmit:Se,children:[Object(v.jsx)("h4",{className:"UserProfileView_body_section_title",children:"ACCOUNT"}),Object(v.jsxs)("div",{className:"UserProfileView_body_section_content",children:[Object(v.jsxs)("div",{className:"UserProfileView_body_section_content_inputs",children:[Object(v.jsx)("span",{children:"Email:"}),Object(v.jsx)("input",{value:(null===(l=e.user)||void 0===l?void 0:l.email)||C,type:"text",id:"email-input",name:"email",onChange:_e,required:!0})]}),Object(v.jsxs)("div",{className:"UserProfileView_body_section_content_inputs",children:[Object(v.jsx)("span",{children:"Password:"}),Object(v.jsx)("input",{value:L,type:"password",id:"password-input",name:"password",onChange:_e})]}),Object(v.jsxs)("div",{className:"UserProfileView_body_section_content_inputs",children:[Object(v.jsx)("span",{children:"Confirm Password:"}),Object(v.jsx)("input",{value:A,type:"password",id:"password-confirm-input",name:"confirmPassword",onChange:_e})]}),Object(v.jsxs)("div",{className:"UserProfileView_body_section_content_inputs",children:[Object(v.jsx)("span",{children:"Write something about yourself:"}),Object(v.jsx)("input",{value:(null===(b=e.user)||void 0===b?void 0:b.bio)||z,type:"text",id:"bio-input",name:"bio",onChange:_e})]}),Object(v.jsxs)("div",{className:"UserProfileView_body_section_content_inputs",children:[Object(v.jsx)("span",{children:"Which Instruments Do You Play?:"}),Object(v.jsx)("input",{value:$,type:"text",id:"instruments-input",name:"instruments",onChange:_e})]}),Object(v.jsxs)("div",{className:"UserProfileView_body_section_content_inputs",children:[Object(v.jsx)("span",{children:"Please Select Your Genres:"}),Object(v.jsx)(J,{options:e.definedGenres,selected:ne||(null===(h=e.user)||void 0===h?void 0:h.genre),onSelectedChange:function(e){ae(e)}})]})]}),Object(v.jsx)("button",{className:"save-changes-btn general-btn",children:"Save Changes"})]}),xe&&Object(v.jsx)("button",{className:"settings-btn top-icon",onClick:ye,children:Object(v.jsx)("img",{src:X,alt:"settings"})}),xe&&Object(v.jsx)("button",{className:"sign-out-btn top-icon",onClick:e.onSignOut,children:Object(v.jsx)("img",{src:Z,alt:"sign out"})}),Object(v.jsxs)("div",{className:"UserProfileView_header",children:[Object(v.jsxs)("div",{className:"BackgroundImgAndButton",children:[(null===O||void 0===O?void 0:O.backgroundImg)?Object(v.jsx)("img",{className:"Background",src:O.backgroundImg,alt:"Artist pic"}):Object(v.jsx)("img",{className:"Background",src:"https://source.unsplash.com/random/?musician",alt:"random musician"}),xe&&Object(v.jsx)(r.b,{to:"/artist/upload-background",className:"background-btn",children:Object(v.jsx)("img",{src:R,alt:"upload"})})]}),Object(v.jsxs)("div",{className:"name-avatar-bio-wrapper",children:[Object(v.jsx)("div",{className:"UserProfileView_avatar_wrap",children:(null===O||void 0===O?void 0:O.avatarUrl)?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("img",{className:"avatar-circle UserProfileView_avatar",src:null===O||void 0===O?void 0:O.avatarUrl,alt:"avatar"}),xe&&Object(v.jsx)(r.b,{className:"avatar-change",to:"/profile/upload-avatar",children:Object(v.jsx)("img",{src:R,alt:"edit"})}),Object(v.jsxs)("h3",{className:"profile-name",children:[null===O||void 0===O?void 0:O.firstName," ",null===O||void 0===O?void 0:O.lastName]})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"avatar-circle UserProfileView_avatar_text",children:Object(v.jsxs)("span",{className:"Profile-letters",children:[null===O||void 0===O?void 0:O.firstName[0],null===O||void 0===O?void 0:O.lastName[0]]})}),xe&&Object(v.jsx)(r.b,{className:"avatar-change",to:"/profile/upload-avatar",children:Object(v.jsx)("img",{src:R,alt:"edit"})}),Object(v.jsxs)("h3",{className:"profile-name",children:[null===O||void 0===O?void 0:O.firstName," ",null===O||void 0===O?void 0:O.lastName]})]})}),(null===O||void 0===O?void 0:O.bio)&&Object(v.jsx)("em",{children:O.bio})||Object(v.jsx)("em",{}),(null===O||void 0===O?void 0:O.instruments)&&Object(v.jsxs)("em",{children:["Instruments: ",O.instruments]}),(null===O||void 0===O?void 0:O.genre)&&Object(v.jsxs)("em",{children:["Genres: ",O.genre]})]}),Object(v.jsxs)("div",{className:"ArtistProfileView_follow",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{children:ue}),Object(v.jsx)("span",{children:1===ue?"follower":"followers"})]}),!xe&&ie&&Object(v.jsx)("button",{className:"unfollow-btn",onClick:Ce,children:"unfollow"}),!xe&&!ie&&Object(v.jsx)("button",{className:"follow-btn artist-btn",onClick:Ce,children:"follow"}),!xe&&Object(v.jsx)("button",{className:"artist-btn",children:Object(v.jsx)(r.b,{to:"/artist/".concat(null===O||void 0===O?void 0:O._id,"/tip"),children:"$ tip \ud83e\udd11"})})]})]}),Object(v.jsx)("div",{className:"UserProfileView_body",children:Object(v.jsxs)("div",{className:"UserProfileView_body_section",children:[Object(v.jsxs)("div",{className:"EventsAndNew",children:[Object(v.jsx)("h3",{children:"Upcoming Events"}),xe&&Object(v.jsx)(r.b,{to:"/event/create",children:Object(v.jsx)("button",{className:"addEvent-btn",children:"+"})})]}),he&&Object(v.jsx)(K,Object(o.a)(Object(o.a)({},e),{},{events:he,nowEvents:Oe,isOwnProfile:xe,onDeleteEvent:ke})),!he&&Object(v.jsx)("p",{children:"No events yet"})]})})]})})};n(98);var ee=function(e){return Object(v.jsx)("div",{className:"backdrop",onClick:function(t){"backdrop"===t.target.className&&(e.handleAmountChange(""),e.closeModal())},children:Object(v.jsx)("div",{className:"custom-amount-modal",children:Object(v.jsxs)("form",{className:"custom-amount-modal-content",onSubmit:function(t){console.log(t),t.preventDefault(),e.closeModal()},children:[Object(v.jsxs)("div",{className:"custom-amount-modal-header",children:[Object(v.jsx)("h2",{children:"Custom Amount"}),Object(v.jsx)("button",{className:"custom-amount-modal-close",onClick:e.closeModal,children:"x"})]}),Object(v.jsx)("div",{className:"custom-amount-modal-body",children:Object(v.jsxs)("div",{className:"custom-amount-modal-input",children:[Object(v.jsx)("input",{type:"number",id:"custom-amount",name:"custom-amount",value:e.currentAmount,onChange:function(t){e.handleAmountChange(t.target.value)},min:"0.5",step:"0.05",max:"100000"}),Object(v.jsxs)("div",{className:"modal-btns-wrapper",children:[Object(v.jsx)("button",{className:"custom-amount-modal-submit",type:"submit",children:"Submit"}),Object(v.jsx)("button",{className:"custom-amount-modal-cancel",onClick:function(){e.handleAmountChange(""),e.closeModal()},children:"Cancel"})]})]})})]})})})};n(99);var te=function(e){var t,n,c,s,i,o=Object(a.useState)(null),l=Object(j.a)(o,2),b=l[0],h=l[1],p=Object(a.useState)(!0),m=Object(j.a)(p,2),O=m[0],f=m[1],x=Object(a.useState)("two"),g=Object(j.a)(x,2),N=g[0],y=g[1],S=Object(a.useState)(2),_=Object(j.a)(S,2),C=_[0],k=_[1],U=Object(a.useState)(!1),P=Object(j.a)(U,2),T=P[0],L=P[1],E=Object(a.useState)(""),V=Object(j.a)(E,2),D=V[0],A=V[1],M=Object(a.useState)(!1),I=Object(j.a)(M,2),F=I[0],z=I[1];Object(a.useEffect)((function(){Y(e.match.params.id).then((function(e){h(e),f(!1)}))}),[e.match.params.id]),Object(a.useEffect)((function(){var t;e.user||e.onUserRefresh(),e.match.params.id===(null===(t=e.user)||void 0===t?void 0:t._id)&&e.history.push("/profile")}),[e.match.params.id,null===(t=e.user)||void 0===t?void 0:t._id,e.history]);var G=function(e){y(e.target.name),k(e.target.value)},R=function(){var t=Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Tipping artist with ID: "+b._id),console.log("The quantity is: ",C),t.prev=2,t.next=5,n={token:e.user.paymentDetails.paymentToken,customerId:e.user.paymentDetails.stripeCustomerId,artistId:b._id,amount:C},w.post("/transaction/tip",n).then((function(e){return e.data}));case 5:200===t.sent.code&&z(!0),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:case"end":return t.stop()}var n}),t,null,[[2,9]])})));return function(){return t.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"TipArtistView",children:[Object(v.jsx)("h2",{children:"Select amount"}),O?Object(v.jsx)("div",{children:"Loading details..."}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"artist-info",children:[Object(v.jsx)("img",{src:b.avatarUrl,alt:b.firstName}),Object(v.jsxs)("h2",{children:[b.firstName," ",b.lastName]}),Object(v.jsx)("em",{children:b.bio})]}),Object(v.jsxs)("div",{className:"tip-amount",children:[Object(v.jsx)("button",{value:1,name:"one",className:"one"===N?"tip-active":"",onClick:G,children:"$ 1"}),Object(v.jsx)("button",{value:2,name:"two",className:"two"===N?"tip-active":"",onClick:G,children:"$ 2"}),Object(v.jsx)("button",{value:5,name:"five",className:"five"===N?"tip-active":"",onClick:G,children:"$ 5"}),Object(v.jsx)("button",{value:8,name:"eigth",className:"eigth"===N?"tip-active":"",onClick:G,children:"$ 8"}),Object(v.jsx)("button",{value:10,name:"ten",className:"ten"===N?"tip-active":"",onClick:G,children:"$ 10"}),Object(v.jsx)("button",{value:0,name:"custom",className:"custom"===N?"tip-active":"",onClick:function(e){L(!0),G(e)},children:D||"..."})]})]}),(null===(n=e.user)||void 0===n||null===(c=n.paymentDetails)||void 0===c?void 0:c.paymentToken)&&!F&&Object(v.jsx)("button",{className:"tip-btn",onClick:R,children:"Send a Tip"})||F&&(null===(s=e.user)||void 0===s||null===(i=s.paymentDetails)||void 0===i?void 0:i.paymentToken)&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{className:"tip-successful",children:"Tip sent!"}),Object(v.jsx)("button",{className:"tip-again",onClick:function(){z(!1)},children:"Tip again?"})]})||Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"tip-warning no-method",children:["Tipping is not possible: You need to set a payment method before tipping.",Object(v.jsx)(r.b,{to:"/profile",children:"Add payment method"})]}),Object(v.jsx)("button",{className:"tip-btn disabled-tip-btn",children:"Send a Tip"})]}),Object(v.jsx)("div",{className:"tip-warning",children:"This action is not reversible, please check the amount before tipping."}),T&&Object(v.jsx)(ee,{showModal:T,closeModal:function(){return L(!1)},currentAmount:C,handleAmountChange:function(e){k(e),A(e?"$ ".concat(e):"")}})]})};n(100),n(101);var ne=function(e){return Object(v.jsx)("div",{className:"GenreBlob",children:Object(v.jsx)(r.b,{to:"/search?genre=".concat(e.genre.value),children:e.genre.label})})};n(102);var ae=function(e){return Object(v.jsx)("li",{className:"FeaturedMini",children:Object(v.jsxs)(r.b,{to:"/artist/".concat(e.artist._id),children:[Object(v.jsx)("img",{src:e.artist.backgroundImg||"https://source.unsplash.com/random?sig=".concat(e.artist._id),alt:e.artist.firstName}),Object(v.jsxs)("figcaption",{children:[e.artist.firstName," ",e.artist.lastName]})]})})};n(103);var ce=function(e){var t,n=null===(t=e.event.date.split("T")[1])||void 0===t?void 0:t.split(".")[0].slice(0,-3),a=!1,c=0;return new Date(e.event.date)<new Date&&(a=!0,c=e.event.duration+Math.floor((new Date(e.event.date)-(new Date).getTime())/6e4)),Object(v.jsx)("li",{className:"PlayingTodayMini",children:Object(v.jsxs)(r.b,{to:"/event/".concat(e.event._id),children:[Object(v.jsx)("img",{src:e.artist.avatarUrl||"https://source.unsplash.com/random",className:"".concat(a?"live-avatar":""),alt:e.artist.firstName}),Object(v.jsxs)("p",{children:[e.artist.firstName," ",e.artist.lastName]}),Object(v.jsx)("figcaption",{children:Object(v.jsxs)("span",{children:[!a&&Object(v.jsx)("span",{className:"distance-span",children:" @ "+$(n)}),a&&Object(v.jsxs)("span",{className:"distance-span",children:["(",c>=0?c:0,1===c?" min":" mins"," left)"]})]})}),Object(v.jsx)("span",{className:"distance-span",children:e.distanceToUser&&"".concat(e.distanceToUser," km")})]})})};function se(e){return e*(Math.PI/180)}function ie(e,t,n,a){var c=se(n-e),s=se(a-t),i=Math.sin(c/2)*Math.sin(c/2)+Math.cos(se(e))*Math.cos(se(n))*Math.sin(s/2)*Math.sin(s/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))}var re=function(e){var t=Object(a.useState)([]),n=Object(j.a)(t,2),s=n[0],i=n[1],o=c.a.useState([]),l=Object(j.a)(o,2),u=l[0],d=l[1];Object(a.useEffect)((function(){var e;w.get("/artist/list",{params:{limit:(null===e||void 0===e?void 0:e.limit)||0}}).then((function(e){return e.data.artists})).then((function(e){i(e)})),b()}),[]);var b=function(){w.get("/event/list/today").then((function(e){return e.data.events})).then((function(e){d(e)}))};return Object(v.jsx)("div",{children:Object(v.jsxs)("div",{className:"HomeView",children:[Object(v.jsxs)("section",{className:"HomeView__section",children:[Object(v.jsx)("h2",{children:"Playing Today"}),Object(v.jsx)("ul",{className:"playingToday",children:u.map((function(t){var n,a,c=ie(t.location.coordinates[0],t.location.coordinates[1],null===(n=e.userLocation)||void 0===n?void 0:n.lat,null===(a=e.userLocation)||void 0===a?void 0:a.lng);return Object(v.jsx)(ce,{event:t,artist:t.artist,distanceToUser:c.toFixed(2)},t._id)}))})]}),Object(v.jsxs)("section",{className:"HomeView__section",children:[Object(v.jsx)("h2",{children:"Featured Artists"}),Object(v.jsx)("ul",{className:"featured-list",children:null===s||void 0===s?void 0:s.map((function(e){return Object(v.jsx)(ae,{artist:e},e._id)}))})]}),Object(v.jsxs)("section",{className:"HomeView__section",children:[Object(v.jsx)("h2",{children:"Genres"}),Object(v.jsx)("ul",{className:"HomeView__genres",children:e.definedGenres.map((function(e){return Object(v.jsx)(ne,{genre:e},e.value)}))})]}),Object(v.jsx)(r.b,{to:"/search",children:Object(v.jsx)("section",{className:"HomeView__section",children:Object(v.jsx)("h2",{className:"search-title",children:"Search..."})})})]})})},oe=n.p+"static/media/Vector.751245fe.svg";function le(e){var t=e.mapContainerStyle,n=e.mapCenter;return Object(v.jsx)("div",{style:t,children:Object(v.jsx)(h.b,{mapContainerStyle:t,zoom:15,center:n,children:Object(v.jsx)(h.d,{icon:oe,position:n})})})}n(43);var ue=function(e){var t=Object(a.useState)(),n=Object(j.a)(t,2),c=n[0],s=n[1];Object(a.useEffect)((function(){i()}),[e.match.params.id]);var i=function(){var t=Object(d.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(c),console.log("match",e.match.params),t.prev=2,t.next=5,a=e.match.params.id,w.get("/event/".concat(a),a).then((function(e){return e.data.event}));case 5:n=t.sent,s(n),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:case"end":return t.stop()}var a}),t,null,[[2,9]])})));return function(){return t.apply(this,arguments)}}();return Object(v.jsx)("div",{className:"EventDetailView",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:"Event Details"}),Object(v.jsx)("h2",{children:null===c||void 0===c?void 0:c.title}),Object(v.jsxs)("p",{children:[null===c||void 0===c?void 0:c.artist.firstName," ",null===c||void 0===c?void 0:c.artist.lastName,":"," ",null===c||void 0===c?void 0:c.description]}),Object(v.jsx)("h3",{children:"Location"}),Object(v.jsx)(le,{mapContainerStyle:{width:"100%",height:"10rem"},mapCenter:{lat:null===c||void 0===c?void 0:c.location.coordinates[0],lng:null===c||void 0===c?void 0:c.location.coordinates[1]}}),Object(v.jsx)("h3",{children:"Date"}),Object(v.jsx)("p",{children:null===c||void 0===c?void 0:c.date.split("T")[0]}),Object(v.jsxs)("p",{children:["Duration: ",null===c||void 0===c?void 0:c.duration," minutes"]}),Object(v.jsx)("h3",{children:"Genres"}),Object(v.jsx)("div",{children:null===c||void 0===c?void 0:c.genre.map((function(e){var t={value:e,label:e};return Object(v.jsx)(ne,{genre:t},t.value)}))})]})})},de=n(28),je=function(e,t,n){e.geocode({location:t}).then((function(e){e.results[0]?n(t,e.results[0]):console.log("No results found")})).catch((function(e){return console.log("Geocoder failed due to: "+e)}))};n(44);function be(e){var t=Object(a.useState)(null),n=Object(j.a)(t,2),c=n[0],s=n[1],i=Object(a.useCallback)((function(e){s(e)}),[]),r=Object(a.useCallback)((function(){s(null)}),[]),o=function(){var t=Object(d.a)(u.a.mark((function t(){var n,a,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===c||void 0===c?void 0:c.getCenter().lat(),a=null===c||void 0===c?void 0:c.getCenter().lng(),console.log(n,a),s="Not set",!e.geocoder){t.next=8;break}return t.next=7,je(e.geocoder,{lat:n,lng:a},e.onConfirmation);case 7:s=t.sent;case 8:console.log("The address is:",s),e.onClose();case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return e.isLoaded?e.isLoaded?Object(v.jsxs)(h.b,{mapContainerStyle:{width:"100%",height:"100%",position:"absolute"},center:e.userLocation,zoom:14,onLoad:i,onUnmount:r,yesIWantToUseGoogleMapApiInternals:!0,defaultCenter:e.userLocation,options:function(e){var t,n,a,c;return{initZoomControl:!0,zoomControlOptions:{position:null===(t=window.google)||void 0===t?void 0:t.maps.ControlPosition.RIGHT_BOTTOM,style:null===(n=window.google)||void 0===n?void 0:n.maps.ZoomControlStyle.LARGE},mapTypeControlOptions:{position:null===(a=window.google)||void 0===a?void 0:a.maps.ControlPosition.TOP_LEFT,style:null===(c=window.google)||void 0===c?void 0:c.maps.MapTypeControlStyle.DROPDOWN_MENU}}}(),children:[Object(v.jsx)("img",{src:oe,alt:"Pin",className:"overlay-pin"}),Object(v.jsxs)("div",{className:"buttons-container",children:[Object(v.jsx)("button",{className:"confirm-btn overlay-btn",onClick:o,children:"Confirm Location"}),Object(v.jsx)("button",{className:"exit-btn overlay-btn",onClick:e.onClose,children:"Exit"})]})]}):Object(v.jsx)(v.Fragment,{children:"Loading view?..."}):Object(v.jsx)("div",{children:"Map cannot be loaded right now."})}var he=c.a.memo(be),pe=function(e){Object(V.a)(n,e);var t=Object(D.a)(n);function n(e){var a;return Object(L.a)(this,n),(a=t.call(this,e)).handleGenreSelectionChange=function(e){a.setState({genre:e})},a.handleMapToggle=function(){a.setState((function(e){return{showMap:!e.showMap}}))},a.handleLocationChange=function(e,t){console.log(t),a.setState({location:e,address:t.formatted_address})},a.handleDateChange=function(e){console.log(e.target.value);var t=new Date(e.target.value);a.setState({date:t.toISOString().split("T")[0]})},a.handleTimeChange=function(e){a.setState({time:e.target.value})},a.handleRightNowClick=function(){var e,t=60*(new Date).getTimezoneOffset()*1e3,n=new Date(Date.now()-t);console.log(a.state.date),a.setState({date:n.toISOString().split("T")[0],time:null===(e=n.toISOString().split("T")[1])||void 0===e?void 0:e.split(".")[0].slice(0,-3)})},a.handleInputChange=function(e){a.setState(Object(de.a)({},e.target.name,e.target.value))},a.handleFormSubmission=function(e){e.preventDefault();var t,n=a.state,c=n.title,s=n.date,i=n.time,r=n.duration,o=n.description,l=n.genre,u=n.location;console.log(c,s,i,r,o,l,u),(t={title:c,date:s,time:i,duration:r,description:o,genre:l,location:u},w.post("/event/create",t).then((function(e){return e.data.event}))).then((function(e){console.log(e),a.props.history.push("/")})).catch((function(e){alert("There was an error creating event."),console.log(e)}))},a.state={title:"",date:"",time:"",duration:5,description:"",genre:[],showMap:!1,location:{lat:0,lng:0},address:""},a}return Object(E.a)(n,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"CreateEventOutterWrapper",children:Object(v.jsx)("div",{children:!this.state.showMap&&Object(v.jsxs)("div",{className:"CreateEventView",children:[Object(v.jsx)("h1",{className:"section-title",children:"New Event"}),Object(v.jsxs)("form",{onSubmit:this.handleFormSubmission,className:"CreateEventView_content_form",children:[Object(v.jsx)("h3",{children:"Details"}),Object(v.jsxs)("div",{className:"CreateEventView_inputs",children:[Object(v.jsx)("label",{htmlFor:"event-date",children:"When"}),Object(v.jsx)("input",{id:"event-date",name:"duration",type:"date",value:this.state.date,onChange:this.handleDateChange,placeholder:"Date of the event"}),Object(v.jsx)("input",{id:"event-time",name:"time",type:"time",value:this.state.time,onChange:this.handleTimeChange,placeholder:"Date of the event"}),Object(v.jsx)("span",{className:"right-now-btn event-btn",onClick:this.handleRightNowClick,children:"Right Now!"})]}),Object(v.jsxs)("div",{className:"CreateEventView_inputs",children:[Object(v.jsx)("label",{htmlFor:"event-title",children:"Title"}),Object(v.jsx)("input",{id:"event-title",name:"title",type:"text",value:this.state.title,onChange:this.handleInputChange,placeholder:"Title for event"})]}),Object(v.jsxs)("div",{className:"CreateEventView_inputs",children:[Object(v.jsx)("label",{htmlFor:"event-description"}),Object(v.jsx)("textarea",{id:"event-description",name:"description",placeholder:"Add more info about your event",rows:"5",maxLength:"140",value:this.state.description,onChange:this.handleInputChange})]}),Object(v.jsxs)("div",{className:"CreateEventView_inputs",children:[Object(v.jsx)("label",{htmlFor:"event-duration",children:"Duration (minutes)"}),Object(v.jsx)("input",{id:"event-duration",name:"duration",type:"number",placeholder:"Duration of the event",value:this.state.duration,onChange:this.handleInputChange,min:"5"})]}),Object(v.jsx)("h3",{children:"Location"}),Object(v.jsx)("p",{children:this.state.address||"Address... "}),Object(v.jsx)("span",{className:"select-location-btn event-btn",onClick:this.handleMapToggle,children:"Select Location"}),Object(v.jsx)("h3",{children:"Genres"}),Object(v.jsx)(J,{options:this.props.definedGenres,selected:this.state.genre,onSelectedChange:this.handleGenreSelectionChange}),Object(v.jsx)("button",{className:"create-event-button event-btn",children:"Confirm"})]})]})||Object(v.jsx)(he,{isLoaded:this.props.isLoaded,onClose:this.handleMapToggle,onConfirmation:this.handleLocationChange,userLocation:this.props.userLocation,geocoder:this.props.geocoder})})})}}]),n}(a.Component);var ve=function(){return Object(v.jsx)("div",{children:"Here is the EDIT event"})};var me=function(e){var t=Object(a.useState)([]),n=Object(j.a)(t,2),c=n[0],s=n[1];return Object(a.useEffect)((function(){var e;w.get("/event/list",{params:{limit:(null===e||void 0===e?void 0:e.limit)||0}}).then((function(e){return e.data.events})).then((function(e){console.log(e),s(e)})).catch((function(e){console.log(e)}))}),[]),Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:"Here is the LIST event"}),Object(v.jsx)("ul",{children:c.map((function(e){return Object(v.jsx)("li",{children:Object(v.jsx)(r.b,{to:"/event/".concat(e._id),children:e.title})},e._id)}))})]})};n(104);var Oe=function(){return Object(v.jsx)("div",{className:"HomeUnauthViewOutter",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:"TIPPER"}),Object(v.jsx)("p",{children:"Find the Best Street Artists in Your City!"}),Object(v.jsx)("div",{id:"triangle-bottomleft"})]})})};function fe(e){var t=e.msg,n=e.type,c=Object(a.useState)(!1),s=Object(j.a)(c,2),i=s[0],r=s[1];return Object(a.useEffect)((function(){t&&(r(!0),setInterval((function(){r(!1)}),2e3))}),[t]),Object(v.jsx)(v.Fragment,{children:i&&Object(v.jsx)("div",{className:"alert alert-".concat(n),children:t})})}n(105);var xe=function(e){var t=Object(a.useState)(""),n=Object(j.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(""),o=Object(j.a)(i,2),l=o[0],b=o[1],h=Object(a.useState)(""),p=Object(j.a)(h,2),m=p[0],O=p[1],f=Object(a.useState)(""),x=Object(j.a)(f,2),g=x[0],w=x[1],N=Object(a.useState)(""),y=Object(j.a)(N,2),S=y[0],_=y[1],C=Object(a.useState)(""),k=Object(j.a)(C,2),U=k[0],T=k[1],L=Object(a.useState)(!1),E=Object(j.a)(L,2),V=E[0],D=E[1],A=Object(a.useState)(!1),M=Object(j.a)(A,2),I=M[0],F=M[1],z=function(e){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){b(t.result)}},G=function(){var t=Object(d.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,P(m);case 4:s(""),b(""),"defaultUser"===e.user.role&&F(!0),w("Image uploaded successfully"),setTimeout((function(){D(!0)}),1e3),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(1),console.error(t.t0),_("Something went wrong!"),console.log("Upload error: ",t.t0);case 16:console.log(U);case 17:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"Upload-View",children:[Object(v.jsx)("h1",{className:"title",children:"Upload Your Picture"}),Object(v.jsx)(fe,{msg:S,type:"danger"}),Object(v.jsx)(fe,{msg:g,type:"success"}),Object(v.jsxs)("form",{onSubmit:G,className:"form",children:[Object(v.jsx)("input",{id:"fileInput",type:"file",name:"image",value:c,onChange:function(e){var t=e.target.files[0];console.log(e.target.files[0]),T(t),z(t),O(t),s(e.target.value)},className:"form-input"}),Object(v.jsx)("button",{className:"save-changes-btn",type:"submit",children:"Submit"})]}),l&&Object(v.jsx)("img",{src:l,alt:"chosen",style:{height:"100px"}}),V&&I&&Object(v.jsx)(r.b,{to:"/profile",children:Object(v.jsx)("button",{className:"save-changes-btn",children:"Take me back to my profile"})}),V&&!I&&Object(v.jsx)(r.b,{to:"/artist/".concat(e.user._id),children:Object(v.jsx)("button",{className:"save-changes-btn",children:"Take me back to my profile"})})]})};n(106);var ge=function(e){var t=Object(a.useState)(!1),n=Object(j.a)(t,2),c=n[0],s=n[1];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(h.d,{position:{lat:e.event.location.coordinates[0],lng:e.event.location.coordinates[1]},icon:e.icon,onClick:function(t){e.setActiveInfo(e.event._id),s(!0),console.log(t,c)}}),e.activeInfo===e.event._id&&Object(v.jsx)(h.c,{position:{lat:e.event.location.coordinates[0],lng:e.event.location.coordinates[1]},onCloseClick:function(){e.setActiveInfo(null),s(!1)},children:Object(v.jsx)("div",{className:"event-details-infowindow",children:Object(v.jsx)(ce,{event:e.event,artist:e.event.artist})})})]})};n(107);var we=function(e){return Object(v.jsx)("div",{children:Object(v.jsx)("input",{type:"text",placeholder:"Search for a location",className:"SearchBar",onClick:e.onClick})})},Ne=n.p+"static/media/userlocation.2f176113.svg";function ye(e){var t,n,c=Object(h.e)({id:"google-map-script",googleMapsApiKey:"AIzaSyBJAalzW_vhpYsUYMJ6Xzddvt31ym8aSLM",libraries:["places"]}),s=c.isLoaded,i=c.loadError,r=Object(a.useState)(null),o=Object(j.a)(r,2),l=(o[0],o[1]),b=Object(a.useState)({lat:+(null===(t=e.userLocation)||void 0===t?void 0:t.lat),lng:+(null===(n=e.userLocation)||void 0===n?void 0:n.lng)}),p=Object(j.a)(b,2),m=p[0],O=p[1],f=Object(a.useState)([]),x=Object(j.a)(f,2),g=x[0],N=x[1],y=Object(a.useState)(null),S=Object(j.a)(y,2),_=S[0],C=S[1],k=Object(a.useState)(null),U=Object(j.a)(k,2),P=U[0],T=U[1],L=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.get("/event/list/now").then((function(e){return e.data.events}));case 3:t=e.sent,N(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),E=Object(a.useCallback)((function(e){l(e),L()}),[]),V=Object(a.useCallback)((function(){l(null)}),[]);return i?Object(v.jsx)("div",{children:"Map cannot be loaded right now."}):s&&e.userLocation?Object(v.jsxs)(h.b,{mapContainerStyle:{width:"100%",height:"100vh"},center:m,zoom:14,onLoad:E,onUnmount:V,yesIWantToUseGoogleMapApiInternals:!0,defaultCenter:e.userLocation,options:function(e){var t,n,a,c;return{initZoomControl:!0,zoomControlOptions:{position:null===(t=window.google)||void 0===t?void 0:t.maps.ControlPosition.RIGHT_BOTTOM,style:null===(n=window.google)||void 0===n?void 0:n.maps.ZoomControlStyle.LARGE},mapTypeControlOptions:{position:null===(a=window.google)||void 0===a?void 0:a.maps.ControlPosition.TOP_LEFT,style:null===(c=window.google)||void 0===c?void 0:c.maps.MapTypeControlStyle.DROPDOWN_MENU}}}(),onClick:function(e){console.log(e.latLng.lat()),console.log(e.latLng.lng());var t=navigator.geolocation.getCurrentPosition((function(e){var t={lat:+e.coords.latitude,lng:+e.coords.longitude};t&&console.log(t)}));console.log("Current position: "+t)},children:[Object(v.jsx)(h.a,{onLoad:function(e){T(e)},onPlaceChanged:function(){console.log("onPlaceChanged");var t,n=P.getPlace();if(n.geometry){var a=n.geometry.location,c=a.lat,s=a.lng;t={lat:+parseFloat(c()),lng:+parseFloat(s())}}else{var i,r;t={lat:+(null===(i=e.userLocation)||void 0===i?void 0:i.lat),lng:+(null===(r=e.userLocation)||void 0===r?void 0:r.lng)}}O(t),console.log(t)},children:Object(v.jsx)(we,{})}),g.map((function(t){var n=ie(t.location.coordinates[0],t.location.coordinates[1],e.userLocation.lat,e.userLocation.lng);return Object(v.jsx)(ge,{event:t,icon:oe,activeInfo:_,setActiveInfo:C,distanceToUser:n},t._id)})),Object(v.jsx)(h.d,{icon:Ne,position:e.userLocation})]}):Object(v.jsx)(v.Fragment,{children:"Loading view?..."})}var Se=c.a.memo(ye);n(108);var _e=function(e){return Object(v.jsx)("div",{className:"ExploreView",children:Object(v.jsx)(Se,{userLocation:e.userLocation,onUserRefresh:e.onUserRefresh})})};n(45);var Ce=function(e){var t,n,s,i,o=c.a.useState("The world"),l=Object(j.a)(o,2),b=l[0],h=l[1],p=function(e,t){t&&h("".concat(t.address_components[3].long_name,", ").concat(t.address_components[4].long_name))},m=function(){var t=Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.artist.lastLocation){t.next=3;break}return t.next=3,je(e.geocoder,{lat:e.artist.lastLocation.coordinates[0],lng:e.artist.lastLocation.coordinates[1]},p);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){m()}),[]),Object(v.jsxs)("div",{className:"SearchArtistMini",children:[Object(v.jsxs)(r.b,{to:"/artist/".concat(null===(t=e.artist)||void 0===t?void 0:t._id),className:"SearchArtistMini_left",children:[Object(v.jsx)("img",{className:"SearchArtistMini_avatar",src:(null===(n=e.artist)||void 0===n?void 0:n.avatarUrl)||"https://source.unsplash.com/random",alt:"artist"}),Object(v.jsxs)("div",{className:"SearchArtistMini_info",children:[Object(v.jsxs)("span",{children:[null===(s=e.artist)||void 0===s?void 0:s.firstName," ",null===(i=e.artist)||void 0===i?void 0:i.lastName]}),Object(v.jsx)("span",{children:b})]})]}),Object(v.jsxs)("div",{className:"options-dots",children:[Object(v.jsx)("span",{className:"options-dot"}),Object(v.jsx)("span",{className:"options-dot"}),Object(v.jsx)("span",{className:"options-dot"})]})]})};n(109);var ke=function(e){var t,n,a,c,s,i=e.event.date.split("T")[0],o=null===(t=e.event.date.split("T")[1])||void 0===t?void 0:t.split(".")[0].slice(0,-3),l=!1,u=0;return new Date(e.event.date)<new Date&&(l=!0,u=e.event.duration+Math.floor((new Date(e.event.date)-(new Date).getTime())/6e4)),Object(v.jsxs)("div",{className:"SearchArtistMini",children:[Object(v.jsxs)(r.b,{to:"/event/".concat(null===(n=e.event)||void 0===n?void 0:n._id),className:"SearchArtistMini_left",children:[Object(v.jsx)("img",{className:"SearchArtistMini_avatar ".concat(l?"live-avatar":""),src:(null===(a=e.event)||void 0===a||null===(c=a.artist)||void 0===c?void 0:c.avatarUrl)||"https://source.unsplash.com/random",alt:"artist"}),Object(v.jsxs)("div",{className:"SearchArtistMini_info",children:[Object(v.jsx)("span",{children:null===(s=e.event)||void 0===s?void 0:s.title}),Object(v.jsxs)("span",{children:[!l&&Object(v.jsx)("span",{className:"distance-span",children:i+" @ "+$(o)}),l&&Object(v.jsxs)("span",{className:"distance-span",children:["LIVE - (",u>=0?u:0,1===u?" min":" mins"," left)"]})]}),Object(v.jsxs)("span",{className:"distance-span",children:[e.distanceToUser," km"]})]})]}),Object(v.jsxs)("div",{className:"options-dots",children:[Object(v.jsx)("span",{className:"options-dot"}),Object(v.jsx)("span",{className:"options-dot"}),Object(v.jsx)("span",{className:"options-dot"})]})]})},Ue=n.p+"static/media/close-icon.eef8cb09.svg",Pe=(n(110),n(111));var Te=function(e){var t=Object(a.useState)([]),n=Object(j.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(0),r=Object(j.a)(i,2),o=r[0],l=r[1],b=Object(a.useState)([]),h=Object(j.a)(b,2),p=h[0],m=h[1],O=Object(a.useState)(0),f=Object(j.a)(O,2),x=f[0],g=f[1],N=Object(a.useState)(""),y=Object(j.a)(N,2),S=y[0],_=y[1],C=Object(a.useState)("artists"),k=Object(j.a)(C,2),U=k[0],P=k[1],T=Object(a.useState)([]),L=Object(j.a)(T,2),E=L[0],V=L[1];Object(a.useEffect)((function(){var t=Pe.parse(e.location.search);t.genre&&Array.isArray(t.genre)?V([].concat(Object(B.a)(E),Object(B.a)(t.genre))):t.genre&&V([].concat(Object(B.a)(E),[t.genre]))}),[E,e.location.search]),Object(a.useEffect)((function(){D(),A()}),[S,E]);var D=function(){var t=Object(d.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a={userLat:e.userLocation.lat,userLng:e.userLocation.lng,q:S,genres:E,limit:100,mode:"query"},w.get("/artist/search",{params:{q:(null===a||void 0===a?void 0:a.q)||"",limit:(null===a||void 0===a?void 0:a.limit)||0,genres:(null===a||void 0===a?void 0:a.genres)||[],mode:(null===a||void 0===a?void 0:a.mode)||"query",userLocation:a.userLocation}}).then((function(e){return e.data}));case 3:n=t.sent,s(null===n||void 0===n?void 0:n.artists),l(null===n||void 0===n?void 0:n.artists.length),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}var a}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),A=function(){var t=Object(d.a)(u.a.mark((function t(){var n,a,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s={userLat:e.userLocation.lat,userLng:e.userLocation.lng,q:S,genres:E,limit:100,mode:"query"},w.get("/event/search",{params:{q:(null===s||void 0===s?void 0:s.q)||"",limit:(null===s||void 0===s?void 0:s.limit)||0,genres:(null===s||void 0===s?void 0:s.genres)||[],mode:(null===s||void 0===s?void 0:s.mode)||"query",userLat:(null===s||void 0===s?void 0:s.userLat)||0,userLng:(null===s||void 0===s?void 0:s.userLng)||0}}).then((function(e){return e.data}));case 3:c=t.sent,m(c.events),g(null!==(n=null===(a=c.events)||void 0===a?void 0:a.length)&&void 0!==n?n:0),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}var s}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),M=function(e){U!==e.target.getAttribute("name")&&P(e.target.getAttribute("name"))};return Object(v.jsx)("div",{className:"SearchListView",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{children:"Ready to explore?"}),Object(v.jsxs)("div",{className:"input-wrapper",children:[Object(v.jsx)("img",{src:"https://img.icons8.com/ios/50/000000/search.png",alt:"search"}),Object(v.jsx)("input",{type:"text",name:"search",placeholder:"Search...",value:S,onChange:function(e){return _(e.target.value)},autoComplete:"off"}),Object(v.jsx)("img",{onClick:function(){_("")},src:Ue,alt:"search",className:S?"":"d-none"})]}),Object(v.jsx)(J,{options:e.definedGenres,selected:E,onSelectedChange:function(e){return V(e)},blobSize:"small"}),Object(v.jsxs)("ul",{className:"type-selection",children:[Object(v.jsxs)("li",{onClick:M,name:"artists",className:"artists"===U?"active":"",children:["Artists",Object(v.jsx)("span",{onClick:M,name:"artists",className:"artists"===U?"active":"",children:o>99?"99+":o})]}),Object(v.jsxs)("li",{onClick:M,name:"events",className:"events"===U?"active":"",children:["Events",Object(v.jsx)("span",{onClick:M,name:"events",className:"events"===U?"active":"",children:x>99?"99+":x})]})]}),Object(v.jsxs)("div",{className:"search-list",children:["artists"===U&&c.map((function(t){return Object(v.jsx)(Ce,{artist:t,geocoder:e.geocoder},t._id)})),"events"===U&&p.map((function(t){var n=ie(t.location.coordinates[0],t.location.coordinates[1],e.userLocation.lat,e.userLocation.lng);return Object(v.jsx)(ke,{event:t,distanceToUser:n.toFixed(2)},t._id)}))]})]})})};n(126);var Le=function(e){var t=Object(a.useState)(""),n=Object(j.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(""),o=Object(j.a)(i,2),l=o[0],b=o[1],h=Object(a.useState)(""),p=Object(j.a)(h,2),m=p[0],O=p[1],f=Object(a.useState)(""),x=Object(j.a)(f,2),g=x[0],w=x[1],N=Object(a.useState)(""),y=Object(j.a)(N,2),S=y[0],_=y[1],C=Object(a.useState)(""),k=Object(j.a)(C,2),U=k[0],P=k[1],T=Object(a.useState)(!1),L=Object(j.a)(T,2),E=L[0],V=L[1],D=function(e){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){b(t.result)}},A=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,H(m);case 4:s(""),b(""),w("Image uploaded successfully"),setTimeout((function(){V(!0)}),1e3),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),_("Something went wrong!"),console.log("Upload error: ",e.t0);case 15:console.log(U);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"Upload-View",children:[Object(v.jsx)("h1",{children:"Upload Your Background Image"}),Object(v.jsx)(fe,{msg:S,type:"danger"}),Object(v.jsx)(fe,{msg:g,type:"success"}),Object(v.jsxs)("form",{onSubmit:A,className:"form",children:[Object(v.jsx)("input",{id:"fileInput",type:"file",name:"image",value:c,onChange:function(e){var t=e.target.files[0];console.log(e.target.files[0]),P(t),D(t),O(t),s(e.target.value)},className:"form-input"}),Object(v.jsx)("button",{className:"upload-background",type:"submit",children:"Submit"})]}),l&&Object(v.jsx)("img",{src:l,alt:"chosen",style:{height:"100px"}}),E&&Object(v.jsx)(r.b,{to:"/artist/".concat(e.user._id),children:Object(v.jsx)("button",{className:"upload-background",children:"Take me back to my profile"})})]})};n(127);var Ee=function(){var e=Object(h.e)({id:"google-map-script",googleMapsApiKey:"AIzaSyBJAalzW_vhpYsUYMJ6Xzddvt31ym8aSLM",libraries:["places"]}).isLoaded,t=null;e&&(t=new window.google.maps.Geocoder,console.log(t));var n=Object(a.useState)(null),c=Object(j.a)(n,2),s=c[0],i=c[1],r=Object(a.useState)(!1),l=Object(j.a)(r,2),p=l[0],m=l[1],g=Object(a.useState)(null),N=Object(j.a)(g,2),U=N[0],P=N[1],T=Object(a.useState)([{label:"hip hop",value:"hip-hop"},{label:"rock",value:"rock"},{label:"pop",value:"pop"},{label:"country",value:"country"},{label:"jazz",value:"jazz"},{label:"classical",value:"classical"},{label:"blues",value:"blues"}]),L=Object(j.a)(T,1)[0];Object(a.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude};t?(P(t),y({location:t}).then((function(){console.log("updated last location")})).catch((function(e){console.log(e)}))):P({lat:37.773972,lng:-122.431297})}))}),[]),Object(a.useEffect)((function(){E()}),[]);var E=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.get("/auth/me").then((function(e){return e.data.user}));case 3:(t=e.sent)&&i(t),navigator.geolocation.getCurrentPosition((function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude};t?(P(t),y({location:t}).then((function(){console.log("updated last location")})).catch((function(e){console.log(e)}))):P({lat:37.773972,lng:-122.431297})})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:m(!0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.post("/auth/sign-out");case 3:i(null),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsxs)(x.a,{children:[Object(v.jsx)("title",{children:"Tipper"}),Object(v.jsx)("meta",{property:"og:title",content:"Tipper","data-react-helmet":"true"},"title"),Object(v.jsx)("meta",{property:"og:description",content:"Tipper is a social network for musicians and fans. Find events near you, tip artists, and share your favorite music.","data-react-helmet":"true"},"description"),Object(v.jsx)("meta",{property:"og:image",content:"https://raw.githubusercontent.com/ItsLhun/project-tipper/master/client/public/screens.jpg","data-react-helmet":"true"},"image"),Object(v.jsx)("meta",{property:"og:url",content:"".concat("http://localhost:3010","/"),"data-react-helmet":"true"},"url"),Object(v.jsx)("meta",{property:"og:type",content:"website","data-react-helmet":"true"},"type"),Object(v.jsx)("meta",{property:"og:site_name",content:"Tipper","data-react-helmet":"true"},"site_name")]}),Object(v.jsxs)(b.d,{children:[Object(v.jsx)(b.b,{path:"/",render:function(e){return s?Object(v.jsx)(re,Object(o.a)(Object(o.a)({},e),{},{user:s,definedGenres:L,userLocation:U})):Object(v.jsx)(Oe,Object(o.a)({},e))},exact:!0}),Object(v.jsx)(b.b,{path:"/events",render:function(e){return Object(v.jsx)(me,Object(o.a)(Object(o.a)({},e),{},{user:s}))},exact:!0}),Object(v.jsx)(O,{path:"/event/create",authorized:!p||s,redirect:"/",render:function(n){return Object(v.jsx)(pe,Object(o.a)(Object(o.a)({},n),{},{onAuthenticationChange:i,definedGenres:L,userLocation:U,isLoaded:e,geocoder:t}))},exact:!0}),Object(v.jsx)(O,{path:"/event/edit/:id",authorized:!p||s,redirect:"/",render:function(e){return Object(v.jsx)(ve,Object(o.a)(Object(o.a)({},e),{},{onAuthenticationChange:i}))},exact:!0}),Object(v.jsx)(b.b,{path:"/event/:id",render:function(e){return Object(v.jsx)(ue,Object(o.a)(Object(o.a)({},e),{},{user:s}))},exact:!0}),Object(v.jsx)(O,{path:"/split",authorized:!p||!s,redirect:"/",render:function(e){return Object(v.jsx)(_,Object(o.a)(Object(o.a)({},e),{},{onAuthenticationChange:i}))},exact:!0}),Object(v.jsx)(O,{path:"/sign-up",authorized:!p||!s,redirect:"/",render:function(e){return Object(v.jsx)(C,Object(o.a)(Object(o.a)({},e),{},{onAuthenticationChange:i}))},exact:!0}),Object(v.jsx)(O,{path:"/artist-sign-up",authorized:!p||!s,redirect:"/",render:function(e){return Object(v.jsx)(k,Object(o.a)(Object(o.a)({},e),{},{onAuthenticationChange:i}))},exact:!0}),Object(v.jsx)(O,{path:"/sign-in",authorized:!p||!s,redirect:"/",render:function(e){return Object(v.jsx)(S,Object(o.a)(Object(o.a)({},e),{},{onAuthenticationChange:i}))},exact:!0}),Object(v.jsx)(O,{path:"/profile",authorized:!p||s,redirect:"/",render:function(e){return Object(v.jsx)(q,Object(o.a)(Object(o.a)({},e),{},{user:s,onSignOut:V,onUserRefresh:E}))},exact:!0}),Object(v.jsx)(b.b,{path:"/explore",render:function(e){return Object(v.jsx)(_e,Object(o.a)(Object(o.a)({},e),{},{userLocation:U,onUserRefresh:E}))}}),Object(v.jsx)(b.b,{path:"/search",render:function(n){return Object(v.jsx)(Te,Object(o.a)(Object(o.a)({},n),{},{definedGenres:L,userLocation:U,isLoaded:e,geocoder:t}))}}),Object(v.jsx)(b.b,{path:"/profile/upload-avatar",authorized:p||s,redirect:"/",render:function(e){return Object(v.jsx)(xe,Object(o.a)(Object(o.a)({},e),{},{user:s}))}}),Object(v.jsx)(O,{path:"/artist/upload-background",authorized:p||s,redirect:"/",render:function(e){return Object(v.jsx)(Le,Object(o.a)(Object(o.a)({},e),{},{user:s}))},exact:!0}),Object(v.jsx)(O,{path:"/artist/:id",authorized:!p||s,redirect:"/",render:function(e){return Object(v.jsx)(Q,Object(o.a)(Object(o.a)({},e),{},{user:s,onSignOut:V,definedGenres:L,onUserRefresh:E}))},exact:!0}),Object(v.jsx)(O,{path:"/artist/:id/tip",authorized:!p||s,redirect:"/",render:function(e){return Object(v.jsx)(te,Object(o.a)(Object(o.a)({},e),{},{user:s,definedGenres:L,onUserRefresh:E}))},exact:!0})]}),Object(v.jsx)(f,{user:s,onSignOut:V})]})};i.a.render(Object(v.jsx)(r.a,{children:Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(Ee,{})})}),document.getElementById("root"))},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},59:function(e,t,n){},69:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[128,1,2]]]);
//# sourceMappingURL=main.f72219e6.chunk.js.map